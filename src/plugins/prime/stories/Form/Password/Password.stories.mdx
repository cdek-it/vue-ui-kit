import { Meta, Story } from '@storybook/addon-docs';

import { Template, TemplateMeter, TemplateFloatLabel, TemplateCustom, TemplateClearIcon } from './Password.template';

<Meta title="Prime/Form/Password" />

# Password

[PrimeVue Password](https://primevue.org/password), [Макет](https://www.figma.com/design/HOLKdvQJ8jCLeX17s9d0Yf/UI-Kit--DS--v2.0?node-id=376-1809)

Password используется для ввода конфиденциальной информации с возможностью отображения индикатора силы пароля.

## Базовый пример

Базовый пример без индикатора силы пароля (используйте `:feedback="false"`).

```html dark
<PrimePassword v-model="value" placeholder="Password" :feedback="false" />
```

<Story name="Primary" args={{ feedback: false }}>
  {Template.bind({})}
</Story>

## С индикатором силы

По умолчанию компонент показывает индикатор силы пароля при фокусе.

```html dark
<PrimePassword v-model="value" placeholder="Password" />
```

<Story name="Meter">{TemplateMeter.bind({})}</Story>

## Toggle Mask

Используйте prop `toggleMask` для добавления кнопки показа/скрытия пароля.

```html dark
<PrimePassword v-model="value" placeholder="Password" toggleMask :feedback="false" />
```

## Float Label

Пример использования с FloatLabel.

```html dark
<PrimeFloatLabel variant="in">
  <PrimePassword id="password" v-model="value" toggleMask :feedback="false" />
  <label for="password">Password</label>
</PrimeFloatLabel>
```

<Story name="Float Label">{TemplateFloatLabel.bind({})}</Story>

## Clear Icon

Используйте prop `showClear` для добавления кнопки очистки поля. Иконка появляется только когда поле заполнено.

```html dark
<PrimePassword 
  v-model="value" 
  placeholder="Password" 
  toggleMask 
  showClear
  :feedback="false"
/>
```

<Story name="Clear Icon">{TemplateClearIcon.bind({})}</Story>

## Кастомная валидация


Пример с кастомными правилами валидации через слот `footer`.

```html dark
<script setup>
const password = ref('');

const rules = ref([
  { label: 'At least 8 characters', regex: /.{8,}/, icon: 'ti-point' },
  { label: 'At least one lowercase letter', regex: /[a-z]/, icon: 'ti-point' },
  { label: 'At least one uppercase letter', regex: /[A-Z]/, icon: 'ti-point' },
  { label: 'At least one number', regex: /[0-9]/, icon: 'ti-point' },
  { label: 'At least one special character', regex: /[!@#$%^&*]/, icon: 'ti-point' },
]);

const checkRules = () => {
  rules.value.forEach((rule) => {
    rule.icon = rule.regex.test(password.value) ? 'ti-circle-check' : 'ti-circle-x';
  });
};

const getColor = (icon) => {
  switch (icon) {
    case 'ti-circle-check': return 'green';
    case 'ti-circle-x': return 'red';
    default: return 'grey';
  }
};
</script>

<template>
  <PrimePassword 
    placeholder="Password" 
    v-model="password" 
    @input="checkRules" 
    toggleMask
  >
    <template #footer>
      <div style="padding: 1rem; display: flex; flex-direction: column; gap: 0.5rem">
        <div v-for="rule in rules" :key="rule.label" style="display: flex; align-items: center; gap: 0.5rem">
          <i class="ti" :class="rule.icon" :style="{ color: getColor(rule.icon) }" />
          <span>{{ rule.label }}</span>
        </div>
      </div>
    </template>
  </PrimePassword>
</template>
```


<Story name="Custom Validation">{TemplateCustom.bind({})}</Story>

